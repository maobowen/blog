<!DOCTYPE html>
<html lang="en">
<head><meta name="generator" content="Hexo 3.8.0">

    <!--[if lt IE 9]>
        <style>body {display: none; background: none !important} </style>
        <meta http-equiv="Refresh" Content="0; url=//outdatedbrowser.com/" />
    <![endif]-->

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="format-detection" content="telephone=no">
<meta name="author" content="101对双生儿">



<meta name="description" content="Students from those schools which offer Office 365 Education are eligible to enjoy up to 5TB of OneDrive for Business storage. With the huge space provided, we can turn it into a file hosting platform">
<meta property="og:type" content="article">
<meta property="og:title" content="Deploying OneIndex on Heroku">
<meta property="og:url" content="http://bmao.tech/blog/oneindex-on-heroku/index.html">
<meta property="og:site_name" content="101对双生儿&#39;s Blog">
<meta property="og:description" content="Students from those schools which offer Office 365 Education are eligible to enjoy up to 5TB of OneDrive for Business storage. With the huge space provided, we can turn it into a file hosting platform">
<meta property="og:locale" content="en">
<meta property="og:updated_time" content="2019-01-17T06:48:44.605Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Deploying OneIndex on Heroku">
<meta name="twitter:description" content="Students from those schools which offer Office 365 Education are eligible to enjoy up to 5TB of OneDrive for Business storage. With the huge space provided, we can turn it into a file hosting platform">

<link rel="apple-touch-icon" href="/blog//apple-touch-icon.png">


    <link rel="alternate" href="/atom.xml" title="101对双生儿&#39;s Blog" type="application/atom+xml">



    <link rel="shortcut icon" href="/blog//favicon.png">



    <link href="//cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css" rel="stylesheet">



    <link href="//cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.css" rel="stylesheet">



    <script src="//cdnjs.cloudflare.com/ajax/libs/pace/1.0.2/pace.min.js"></script>
    <link href="//cdnjs.cloudflare.com/ajax/libs/pace/1.0.2/themes/orange/pace-theme-minimal.css" rel="stylesheet">


<link rel="stylesheet" href="/blog/css/style.css">



<link href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">


<title>Deploying OneIndex on Heroku | 101对双生儿&#39;s Blog</title>

<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js"></script>

<script>
    var yiliaConfig = {
        fancybox: true,
        animate: true,
        isHome: false,
        isPost: true,
        isArchive: false,
        isTag: false,
        isCategory: false,
        fancybox_js: "//cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.js",
        scrollreveal: "//cdnjs.cloudflare.com/ajax/libs/scrollReveal.js/3.3.6/scrollreveal.min.js",
        search: true
    }
</script>


    <script>
        yiliaConfig.jquery_ui = [true, "//cdnjs.cloudflare.com/ajax/libs/jqueryui/1.10.4/jquery-ui.min.js", "//cdnjs.cloudflare.com/ajax/libs/jqueryui/1.10.4/css/jquery-ui.min.css"];
    </script>



    <script> yiliaConfig.rootUrl = /blog/; </script>



    <script src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-56ff76c972fc0cf9"></script>




</head></html>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/blog/" class="profilepic">
            
                <img src="https://tvax4.sinaimg.cn/crop.0.0.568.568.180/6e363801ly8fgtxq4arklj20fs0fsdh8.jpg" class="animated zoomIn">
            
        </a>
        <hgroup>
          <h1 class="header-author"><a href="/blog/">101对双生儿</a></h1>
        </hgroup>

        
        <p class="header-subtitle">Not pleased by external gains. Not saddened by personal losses.</p>
        

        
            <form id="search-form">
            <input type="text" id="local-search-input" name="q" placeholder="search..." class="search form-control" autocomplete="off" autocorrect="off" searchonload="false">
            <i class="fa fa-times" onclick="resetSearch()"></i>
            </form>
            <div id="local-search-result"></div>
            <p class="no-result">No results found <i class="fa fa-spinner fa-pulse"></i></p>
        


        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        <div class="icon-wrap icon-link hide" data-idx="2">
                            <div class="loopback_l"></div>
                            <div class="loopback_r"></div>
                        </div>
                        
                        
                        <div class="icon-wrap icon-me hide" data-idx="3">
                            <div class="user"></div>
                            <div class="shoulder"></div>
                        </div>
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>Menu</li>
                        <li>Tags</li>
                        
                        <li>Friends</li>
                        
                        
                        <li>About Me</li>
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/blog/">Homepage</a></li>
                        
                            <li><a href="/blog/archives/">Archives</a></li>
                        
                            <li><a href="/blog/tags/">All Tags</a></li>
                        
                            <li><a href="/blog/resume/">Résumé</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" href="mailto:&#109;&#97;&#111;&#98;&#111;&#119;&#101;&#110;&#51;&#64;&#104;&#111;&#116;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;" title="Email"></a>
                            
                                <a class="fa GitHub" href="https://github.com/maobowen" title="GitHub"></a>
                            
                                <a class="fa Facebook" href="https://facebook.com/maobowen" title="Facebook"></a>
                            
                                <a class="fa Twitter" href="https://twitter.com/maobowen3" title="Twitter"></a>
                            
                                <a class="fa LinkedIn" href="https://www.linkedin.com/in/bowen-mao" title="LinkedIn"></a>
                            
                                <a class="fa 新浪微博" href="https://m.weibo.cn/u/1849047041" title="新浪微博"></a>
                            
                                <a class="fa V2EX" href="https://www.v2ex.com/member/maobowen3" title="V2EX"></a>
                            
                                <a class="fa 知乎" href="https://www.zhihu.com/people/maobowen3" title="知乎"></a>
                            
                                <a class="fa CSDN" href="http://my.csdn.net/maobowen3" title="CSDN"></a>
                            
                                <a class="fa 网易云音乐" href="https://music.163.com/#/user/home?id=449309413" title="网易云音乐"></a>
                            
                                <a class="fa 虾米音乐" href="https://www.xiami.com/u/352348161" title="虾米音乐"></a>
                            
                                <a class="fa bilibili" href="https://space.bilibili.com/49932516" title="bilibili"></a>
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        
                    </div>
                </section>
                
                
                
                <section class="switch-part switch-part3">
                    <div id="js-friends">
                    
                      <a class="main-nav-link switch-friends-link" href="https://hexo.io">Hexo</a>
                    
                      <a class="main-nav-link switch-friends-link" href="https://pages.github.com/">GitHub</a>
                    
                      <a class="main-nav-link switch-friends-link" href="http://moxfive.xyz/">MOxFIVE</a>
                    
                    </div>
                </section>
                

                
                
                <section class="switch-part switch-part4">
                
                    <div id="js-aboutme">A low-end computer science student from an Ivy League school.<br><br>Shanghai ✈️ Hong Kong ✈️ New York City. Always on the way.<br><br>Love Cantopop, hiking and animes.</div>
                </section>
                
            </div>
        </div>
    </header>                
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="回到主页">101对双生儿</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/blog/" class="profilepic">
                
                    <img src="https://tvax4.sinaimg.cn/crop.0.0.568.568.180/6e363801ly8fgtxq4arklj20fs0fsdh8.jpg" class="animated zoomIn">
                
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/blog/" title="回到主页">101对双生儿</a></h1>
            </hgroup>
            
            <p class="header-subtitle">Not pleased by external gains. Not saddened by personal losses.</p>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/blog/">Homepage</a></li>
                
                    <li><a href="/blog/archives/">Archives</a></li>
                
                    <li><a href="/blog/tags/">All Tags</a></li>
                
                    <li><a href="/blog/resume/">Résumé</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" target="_blank" href="mailto:&#109;&#97;&#111;&#98;&#111;&#119;&#101;&#110;&#51;&#64;&#104;&#111;&#116;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;" title="Email"></a>
                            
                                <a class="fa GitHub" target="_blank" href="https://github.com/maobowen" title="GitHub"></a>
                            
                                <a class="fa Facebook" target="_blank" href="https://facebook.com/maobowen" title="Facebook"></a>
                            
                                <a class="fa Twitter" target="_blank" href="https://twitter.com/maobowen3" title="Twitter"></a>
                            
                                <a class="fa LinkedIn" target="_blank" href="https://www.linkedin.com/in/bowen-mao" title="LinkedIn"></a>
                            
                                <a class="fa 新浪微博" target="_blank" href="https://m.weibo.cn/u/1849047041" title="新浪微博"></a>
                            
                                <a class="fa V2EX" target="_blank" href="https://www.v2ex.com/member/maobowen3" title="V2EX"></a>
                            
                                <a class="fa 知乎" target="_blank" href="https://www.zhihu.com/people/maobowen3" title="知乎"></a>
                            
                                <a class="fa CSDN" target="_blank" href="http://my.csdn.net/maobowen3" title="CSDN"></a>
                            
                                <a class="fa 网易云音乐" target="_blank" href="https://music.163.com/#/user/home?id=449309413" title="网易云音乐"></a>
                            
                                <a class="fa 虾米音乐" target="_blank" href="https://www.xiami.com/u/352348161" title="虾米音乐"></a>
                            
                                <a class="fa bilibili" target="_blank" href="https://space.bilibili.com/49932516" title="bilibili"></a>
                            
                        </ul>
            </nav>
        </header>                
    </div>
    <link class="menu-list" tags="Tags" friends="Friends" about="About Me">
</nav>
      <div class="body-wrap"><article id="post-oneindex-on-heroku" class="article article-type-post" itemscope="" itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/blog/oneindex-on-heroku/" class="article-date">
      <time datetime="2018-07-18T15:00:00.000Z" itemprop="datePublished">2018-07-18</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Deploying OneIndex on Heroku
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        

        
        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>Students from those schools which offer <a href="https://products.office.com/en-us/student/office-in-education" target="_blank" rel="noopener">Office 365 Education</a> are eligible to enjoy up to 5TB of OneDrive for Business storage. With the huge space provided, we can turn it into a file hosting platform, which is similar to <a href="https://aws.amazon.com/s3/" target="_blank" rel="noopener">Amazon S3</a>, to store and share static files like documents, images, videos, etc. OneDrive for Business supports <a href="https://support.office.com/en-us/article/share-onedrive-files-and-folders-9fcc2f7d-de0c-4cec-93b0-a82024800c07#OS_Type=OneDrive_-_Business" target="_blank" rel="noopener">sharing files</a> with external users, but your school has to opt to enable external sharing, and the links generated are encoded. We can use a program called <a href="https://github.com/donwa/oneindex" target="_blank" rel="noopener">OneIndex</a> which helps generate <strong>direct download links</strong> without enabling external sharing. We can link to our files directly later.</p>
<a id="more"></a>
<h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p>OneIndex is a PHP program developed by <a href="https://github.com/donwa" target="_blank" rel="noopener">@donwa</a> which indices directories and files in OneDrive or OneDrive for Business. We can deploy it on a PHP server. If you have your own server, you can simply install it on a LAMP (Linux, Apache, MySQL, PHP) stack. In this tutorial, I will demonstrate how to install it on <a href="https://www.heroku.com/" target="_blank" rel="noopener">Heroku</a>, where we can deploy cloud applications for free. However, due to Heroku’s <a href="https://devcenter.heroku.com/articles/dynos#ephemeral-filesystem" target="_blank" rel="noopener">ephemeral file system</a>, we still need a temporary server, and we have to install and configure the program twice.</p>
<h2 id="Installing-OneIndex-on-a-Server"><a href="#Installing-OneIndex-on-a-Server" class="headerlink" title="Installing OneIndex on a Server"></a>Installing OneIndex on a Server</h2><p>You may check <a href="../shadowsocksr/#Prepare-a-server">my previous post</a> to prepare a server if you do not have one. I will deploy a <a href="https://www.vultr.com/promo25b?ref=7436070" target="_blank" rel="noopener">Vultr</a> Cloud Compute (VC2) server with Ubuntu 18.04 in this tutorial.</p>
<h3 id="Installing-Apache2-Web-Server-and-PHP"><a href="#Installing-Apache2-Web-Server-and-PHP" class="headerlink" title="Installing Apache2 Web Server and PHP"></a>Installing Apache2 Web Server and PHP</h3><p>First, follow <a href="https://www.digitalocean.com/community/tutorials/how-to-install-linux-apache-mysql-php-lamp-stack-ubuntu-18-04" target="_blank" rel="noopener">this tutorial</a> to set up a LAMP stack. Here are some points that you should take care of:</p>
<ul>
<li>Setting up firewall rules is important to keep your server secure. However, you can skip enabling the UFW firewall in Step 1 if your server supports setting up firewall from graphical interface or your server is for temporary use. </li>
<li>You can skip Step 2 since we do not need a database. Similarly, you do not to install <code>php-mysql</code> in Step 3.</li>
</ul>
<p>In addition, we need to enable PHP’s cULR module. Run the following commands to install the module and to restart Apache web server:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install php-curl</span><br><span class="line">sudo systemctl restart apache2</span><br></pre></td></tr></table></figure>
<p>We also need to allow <code>.htaccess</code> overrides. Suppose we will use<code>/var/www/oneindex</code> as the root directory of our OneIndex program. Use your favorite editor to create an Apache configuration file for OneIndex:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/apache2/sites-available/oneindex.conf</span><br></pre></td></tr></table></figure>
<p>Add the following text to the file:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;VirtualHost *:80&gt;	DocumentRoot /var/www/oneindex	ErrorLog $&#123;APACHE_LOG_DIR&#125;/error.log	CustomLog $&#123;APACHE_LOG_DIR&#125;/access.log combined	&lt;Directory /var/www/oneindex/&gt;		AllowOverride All	&lt;/Directory&gt;&lt;/VirtualHost&gt;</span><br></pre></td></tr></table></figure>
<p>Then run the following commands to enable our site:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo a2ensite oneindex.conf</span><br><span class="line">sudo a2dissite 000-default.conf</span><br></pre></td></tr></table></figure>
<p>Run the following commands to enable Apache mod_rewrite:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo a2enmod rewrite</span><br><span class="line">sudo systemctl restart apache2</span><br></pre></td></tr></table></figure>
<h3 id="Installing-OneIndex"><a href="#Installing-OneIndex" class="headerlink" title="Installing OneIndex"></a>Installing OneIndex</h3><p>Now, let’s start to deploy OneIndex on our server. Download the GitHub repository, move it to the root directory and change the ownership:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install git</span><br><span class="line">git <span class="built_in">clone</span> https://github.com/donwa/oneindex.git</span><br><span class="line">sudo mv oneindex/ /var/www/</span><br><span class="line">sudo chown -R www-data:www-data /var/www/oneindex</span><br></pre></td></tr></table></figure>
<p>Now, open the browser and visit your site. Follow <a href="https://github.com/donwa/oneindex#安装" target="_blank" rel="noopener">this animation</a> to install and configure OneIndex. Some additional configurations can be found <a href="https://github.com/donwa/oneindex/blob/5ce51982c4903107c44a9e7e7e525869360c034c/README.md#可配置项" target="_blank" rel="noopener">in this tutorial</a>. Make sure that your settings are final, since it is not trivial to change them after we move it onto Heroku.</p>
<h2 id="Installing-OneIndex-on-Heroku"><a href="#Installing-OneIndex-on-Heroku" class="headerlink" title="Installing OneIndex on Heroku"></a>Installing OneIndex on Heroku</h2><p>On the local machine, follow the first two steps of <a href="https://devcenter.heroku.com/articles/getting-started-with-php" target="_blank" rel="noopener">this tutorial</a> to set up the development environment.</p>
<p>Then prepare the template of the PHP cloud application:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/heroku/php-getting-started.git</span><br><span class="line">mv php-getting-started/ onedrive</span><br><span class="line"><span class="built_in">cd</span> onedrive</span><br></pre></td></tr></table></figure>
<p>Pick your favorite editor, edit <code>composer.json</code> in the root directory to adjust dependencies:</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"require"</span> : &#123;</span><br><span class="line">    <span class="attr">"php"</span>: <span class="string">"^7.2.0"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"require-dev"</span>: &#123;</span><br><span class="line">    <span class="attr">"heroku/heroku-buildpack-php"</span>: <span class="string">"*"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Run the following command to update the dependencies:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">composer update</span><br></pre></td></tr></table></figure>
<p>In the root directory, replace the <code>web</code> directory by OneIndex program:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">rm -rf web/</span><br><span class="line">git <span class="built_in">clone</span> https://github.com/donwa/oneindex.git</span><br><span class="line">mv oneindex/ web</span><br></pre></td></tr></table></figure>
<blockquote>
<p>In case you want to put OneIndex in a subfolder, make sure to set up <code>.htaccess</code> correctly under the <code>web</code> directory:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">RewriteEngine On</span><br><span class="line">RewriteCond %&#123;REQUEST_FILENAME&#125; !-f</span><br><span class="line">RewriteCond %&#123;REQUEST_FILENAME&#125; !-d</span><br><span class="line">RewriteRule ^.*$ /index.php [L,QSA]</span><br></pre></td></tr></table></figure>
</blockquote>
<p>Now, we need to “borrow” the configuration files of OneIndex on the server.</p>
<blockquote>
<p>As stated before, Heroku has an ephemeral file system, which means that any files written will be discarded eventually. Generated by the program when we install OneIndex, caches and configuration are not parts of the Heroku application. Therefore, they will go away as well. It does not matter whether caches are persistent, but we have to make sure that configuration is persistent. Therefore, we have to use a temporary server to generate the configuration first and put the files into the Heroku application’s repository before publishing it.</p>
</blockquote>
<p>Pick your favorite SFTP or SCP client, for example, graphical interface tools such as <a href="https://filezilla-project.org" target="_blank" rel="noopener">FileZilla</a> and <a href="https://winscp.net" target="_blank" rel="noopener">WinSCP</a> (for Windows only) or command-line tools such as <code>sftp</code> or <code>scp</code>. Download <code>base.php</code> and <code>token.php</code> from the server (inside <code>/var/www/onedrive/config/</code>) to your local repository (<code>web/config</code>).</p>
<p>Last, create an application on Heroku, and use Heroku CLI to push the local repository to the cloud (supposing your application is <code>oneindex</code>):</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">heroku login</span><br><span class="line">heroku create oneindex</span><br><span class="line">git push heroku master</span><br></pre></td></tr></table></figure>
<p>Open the browser and verify whether OneIndex is working on <a href="https://oneindex.herokuapp.com/" target="_blank" rel="noopener">https://oneindex.herokuapp.com/</a>.</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ol>
<li>M. Drake, “How To Install Linux, Apache, MySQL, PHP (LAMP) stack on Ubuntu 18.04,” <em>DigitalOcean</em>. [Online]. Available: <a href="https://www.digitalocean.com/community/tutorials/how-to-install-linux-apache-mysql-php-lamp-stack-ubuntu-18-04" target="_blank" rel="noopener">https://www.digitalocean.com/community/tutorials/how-to-install-linux-apache-mysql-php-lamp-stack-ubuntu-18-04</a>.</li>
<li>B. Boucheron, “How To Install WordPress with LAMP on Ubuntu 18.04,” <em>DigitalOcean</em>. [Online]. Available: <a href="https://www.digitalocean.com/community/tutorials/how-to-install-wordpress-with-lamp-on-ubuntu-18-04" target="_blank" rel="noopener">https://www.digitalocean.com/community/tutorials/how-to-install-wordpress-with-lamp-on-ubuntu-18-04</a>.</li>
<li>B., “How To Set Up Apache Virtual Hosts on Ubuntu 16.04,” <em>DigitalOcean</em>. [Online]. Available: <a href="https://www.digitalocean.com/community/tutorials/how-to-set-up-apache-virtual-hosts-on-ubuntu-16-04" target="_blank" rel="noopener">https://www.digitalocean.com/community/tutorials/how-to-set-up-apache-virtual-hosts-on-ubuntu-16-04</a>.</li>
<li>“Getting Started on Heroku with PHP,” <em>Heroku</em>. [Online]. Available: <a href="https://devcenter.heroku.com/articles/getting-started-with-php" target="_blank" rel="noopener">https://devcenter.heroku.com/articles/getting-started-with-php</a>.</li>
</ol>
<h2 id="扯些别的"><a href="#扯些别的" class="headerlink" title="扯些别的"></a>扯些别的</h2><p>专题<a href="../funathk/">《FUN@HK 香港玩啲乜》</a>暂时跳票了。在这个专题里，我将会分享许多香港鲜为人知的好去处。然而由于资料整理起来比较耗时间，这个专题何时上线还不确定。</p>
<p>回国以后补、追了这些番：</p>
<ul>
<li><a href="https://zh.moegirl.org/zh-cn/青春之旅" target="_blank" rel="noopener">《青春之旅》（『アオハライド』）</a>：狗粮，还蛮温馨的；</li>
<li><a href="https://zh.moegirl.org/zh-cn/Slow_Start" target="_blank" rel="noopener">《Slow Start》（『スロウスタート』）</a>：没get到萌点；</li>
<li><a href="https://zh.moegirl.org/zh-cn/Comic_Girls" target="_blank" rel="noopener">《Comic Girls》（『こみっくがーるず』）</a>：萝莉们好萌啊，挺励志的；</li>
<li><a href="https://zh.moegirl.org/zh-cn/此花亭奇谭" target="_blank" rel="noopener">《此花亭奇谭》（『このはな綺譚』）</a>：兽耳娘们好萌啊，故事设定也很温馨；</li>
<li><a href="https://zh.moegirl.org/zh-cn/Seiren" target="_blank" rel="noopener">《清恋》（『セイレン』）</a>：污恋，<a href="https://zh.moegirl.org/zh-cn/缘之空" target="_blank" rel="noopener">《缘之空》</a>既视感，还不错；</li>
<li><a href="https://zh.moegirl.org/zh-cn/DARLING_in_the_FRANXX" target="_blank" rel="noopener">《DARLING in the FRANXX》（『ダーリン・イン・ザ・フランキス』）</a>：我TM吹爆<a href="https://zh.moegirl.org/zh-cn/紫罗兰永恒花园" target="_blank" rel="noopener">京紫</a>；</li>
<li><a href="https://zh.moegirl.org/zh-cn/刀剑神域外传_Gun_Gale_Online" target="_blank" rel="noopener">《刀剑神域外传 Gun Gale Online》（『ソードアート・オンライン オルタナティブ ガンゲイル・オンライン』）</a>：故事一般般，坐等十月<a href="https://zh.moegirl.org/zh-cn/刀剑神域" target="_blank" rel="noopener">正篇第三季</a>；</li>
<li><a href="https://zh.moegirl.org/zh-cn/比宇宙更远的地方" target="_blank" rel="noopener">《比宇宙更远的地方》（『宇宙よりも遠い場所』）</a>：一月霸权，故事很棒，然而去一趟南极太贵了；</li>
<li><a href="https://zh.moegirl.org/zh-cn/Another" target="_blank" rel="noopener">《Another》</a>：故事很棒，画面太阴暗，人偶比较恐怖；</li>
<li><a href="https://zh.moegirl.org/zh-cn/漫画家与助手" target="_blank" rel="noopener">《漫画家与助手》（『マンガ家さんとアシスタントさんと』）</a>：搞笑，可惜男主是个绅士；</li>
<li><a href="https://zh.moegirl.org/zh-cn/摇曳露营" target="_blank" rel="noopener">《摇曳露营△》（『ゆるキャン△』）</a>：一月霸权，感同身受但还是不建议一个人去露营。</li>
</ul>

      
    </div>
    
  </div>
  
    
    <div class="copyright">
        <p><span>Title:</span><a href="/blog/oneindex-on-heroku/">Deploying OneIndex on Heroku</a></p>
        <p><span>Author:</span><a href="/blog/" title="Back to Homepage">101对双生儿</a></p>
        <p><span>Created:</span>2018-07-18, 11:00:00</p>
        <p><span>Updated:</span>2019-01-17, 01:48:44</p>
        <p> 
            <span>History:</span><i class="fa fa-github"></i>
            <a href="https://github.com/maobowen/blog/blame/src/source/_posts/oneindex-on-heroku.md" title="View update history for each part in sequence" target="_blank">Blame</a>,
            <a href="https://github.com/maobowen/blog/commits/src/source/_posts/oneindex-on-heroku.md" title="View update history" target="_blank">History</a>
            <span class="raw">Text Mode:</span><i class="fa fa-file-text-o"></i>
            <a href="https://github.com/maobowen/blog/raw/src/source/_posts/oneindex-on-heroku.md" title="View raw file" target="_blank">oneindex-on-heroku.md</a>
        </p>
        <p>
            <span>Full URL:</span><a class="post-url" href="/blog/oneindex-on-heroku/" title="Deploying OneIndex on Heroku">http://bmao.tech/blog/oneindex-on-heroku/</a>
            <span class="copy-path" data-clipboard-text="From http://bmao.tech/blog/oneindex-on-heroku/　　By 101对双生儿" title="Copy Article&#39;s Link &amp; Author"><i class="fa fa-clipboard"></i></span>
            <script> var clipboard = new Clipboard('.copy-path'); </script>
        </p>
        <p>
            <span>License:</span><i class="fa fa-creative-commons"></i> <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" title="CC BY-NC-SA 4.0 International" target="_blank">"CC BY-NC-SA 4.0"</a> Keep Link &amp; Author if Distribute.
        </p>
    </div>



    <nav id="article-nav">
        
            <div id="article-nav-newer" class="article-nav-title">
                <a href="/blog/nys-driver-license/">
                    纽约考取驾照攻略
                </a>
            </div>
        
        
            <div id="article-nav-older" class="article-nav-title">
                <a href="/blog/shadowsocksr/">
                    Setting Up a ShadowsocksR Proxy Server
                </a>
            </div>
        
    </nav>

  
</article>

    <div id="toc" class="toc-article">
        <strong class="toc-title">Contents</strong>
        
            <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Introduction"><span class="toc-number">1.</span> <span class="toc-text">Introduction</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Installing-OneIndex-on-a-Server"><span class="toc-number">2.</span> <span class="toc-text">Installing OneIndex on a Server</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Installing-Apache2-Web-Server-and-PHP"><span class="toc-number">2.1.</span> <span class="toc-text">Installing Apache2 Web Server and PHP</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Installing-OneIndex"><span class="toc-number">2.2.</span> <span class="toc-text">Installing OneIndex</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Installing-OneIndex-on-Heroku"><span class="toc-number">3.</span> <span class="toc-text">Installing OneIndex on Heroku</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Reference"><span class="toc-number">4.</span> <span class="toc-text">Reference</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#扯些别的"><span class="toc-number">5.</span> <span class="toc-text">扯些别的</span></a></li></ol>
        
    </div>
    <style>
        .left-col .switch-btn,
        .left-col .switch-area {
            display: none;
        }
        .toc-level-3 i,
        .toc-level-3 ol {
            display: none !important;
        }
    </style>

    <input type="button" id="tocButton" value="Hide" title="Show or Hide Table of Contents">

    <script>
        yiliaConfig.toc = ["Hide", "Show", !!"false"];
    </script>



    
<div class="share">
    

    
        <div class="addthis_sharing_toolbox"></div>
    
</div>







    
        <section id="comments">
    <style> aside.comment-bar { margin: auto 30px; }</style>
    <div id="disqus_thread"></div>
    <script>
        var disqus_config = function(){
            this.page.url = 'http://bmao.tech/blog/oneindex-on-heroku/';
            this.page.identifier = 'oneindex-on-heroku/';
        };
        var loadComment = function(){
            var d = document, s = d.createElement('script');
            s.src = '//blog-maobowen.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        }
    </script>
    
    <script> loadComment(); </script>

</section>


    




    <div class="scroll" id="post-nav-button">
        
            <a href="/blog/nys-driver-license/" title="Pre: 纽约考取驾照攻略">
                <i class="fa fa-angle-left"></i>
            </a>
        

        <a title="Mini Archives"><i class="fa fa-bars"></i><i class="fa fa-times"></i></a>

        
            <a href="/blog/shadowsocksr/" title="Next: Setting Up a ShadowsocksR Proxy Server">
                <i class="fa fa-angle-right"></i>
            </a>
        
    </div>

    <ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/blog/navigating-nyc-subway/">深入了解纽约地铁</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/nys-driver-license/">纽约考取驾照攻略</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/oneindex-on-heroku/">Deploying OneIndex on Heroku</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/shadowsocksr/">Setting Up a ShadowsocksR Proxy Server</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/apply-ca-visa-in-nyc/">持美国 F-1 签证在纽约市面签加拿大临时居民访问签证</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/mcdonalds-us-mobile-order/">只花$2，就能在美国麦当劳吃到双层牛肉芝士堡？</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/hello/">Hello!</a></li></ul>




    <script>
        
    </script>
</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                <i class="fa fa-copyright"></i> 
                2018-2019 101对双生儿
            </div>
            <div class="footer-right">
                <a href="http://hexo.io/" target="_blank" title="A fast, simple &amp; powerful blog framework">Hexo</a>  Theme <a href="https://github.com/MOxFIVE/hexo-theme-yelee" target="_blank" title="Another simple and elegant theme for Hexo  v3.5">Yelee</a> by MOxFIVE <i class="fa fa-heart animated infinite pulse"></i>
            </div>
        </div>
        
    </div>
</footer>
    </div>
    
<script data-main="/blog/js/main.js" src="//cdnjs.cloudflare.com/ajax/libs/require.js/2.3.5/require.min.js"></script>

    <script>
        $(document).ready(function() {
            var iPad = window.navigator.userAgent.indexOf('iPad');
            if (iPad > -1 || $(".left-col").css("display") === "none") {
                var bgColorList = ["#9db3f4", "#414141", "#e5a859", "#f5dfc6", "#c084a0", "#847e72", "#cd8390", "#996731"];
                var bgColor = Math.ceil(Math.random() * (bgColorList.length - 1));
                $("body").css({"background-color": bgColorList[bgColor], "background-size": "cover"});
            }
            else {
                var backgroundnum = 5;
                var backgroundimg = "url(/blog//background/bg-x.jpg)".replace(/x/gi, Math.ceil(Math.random() * backgroundnum));
                $("body").css({"background": backgroundimg, "background-attachment": "fixed", "background-size": "cover"});
            }
        })
    </script>





    <script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


<div class="scroll" id="scroll">
    <a href="#" title="Back to Top"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments" onclick="load$hide();" title="Comments"><i class="fa fa-comments-o"></i></a>
    <a href="#footer" title="Go to Bottom"><i class="fa fa-arrow-down"></i></a>
</div>
<script>
    // Open in New Window
    
        var oOpenInNew = {
            
            
            
            
            
            
            
            
            
             friends: "#js-friends a", 
             socail: ".social a" 
        }
        for (var x in oOpenInNew) {
            $(oOpenInNew[x]).attr("target", "_blank");
        }
    
</script>

    <script>
        var originTitle = document.title;
        var titleTime;
        document.addEventListener("visibilitychange", function() {
            if (document.hidden) {
                document.title = "(つェ⊂) 我藏好了哦~ " + originTitle;
                clearTimeout(titleTime);
            }
            else {
                document.title = "(*´∇｀*) 被你发现啦~ " + originTitle;
                titleTime = setTimeout(function() {
                    document.title = originTitle;
                }, 2000);
            }
        })
    </script>

<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
  </div>
</body>
</html>